$(function(){var b=$(".page");var o=b.eq(0);var a;var j;b.hide();o.show();function n(){var s=o.next(".page")[0];return s?$(s):b.eq(0);}function d(){var s=o.prev(".page")[0];
return s?$(s):b.eq(-1);}function k(s){return"translate(0, "+s+"px)";}function f(s){s=s*0.7+0.3;return"scale("+s+")";}var l=false;var r;var i;var p;function g(){clearTimeout(p);
o.removeClass("animate");j.removeClass("animate");a.removeClass("animate");o.hide();j.hide();a.hide();o=$(this).show();$(this).off("transitionend",g);$(document).on("touchstart",c);
b.each(function(){if(this===o[0]){$(this).addClass("curr");}else{$(this).removeClass("curr");}});}function c(s){l=true;r=s.touches[0].pageY;a=n().show().css("z-index",1);
j=d().show().css("z-index",1);o.css("z-index",0);i=$(window).height();q(s);}function e(t){if(!l){return;}o.addClass("animate");j.addClass("animate");a.addClass("animate");
var u=300;var s=20;if(j[0].getBoundingClientRect().bottom>s){j.css("-webkit-transform",k(0));o.css("-webkit-transform",[k(i),f(0)].join(" "));a.css("-webkit-transform",k(2*i));
j.on("transitionend",g);p=setTimeout(function(){j.trigger("transitionend",g);},u);}else{if(i-a[0].getBoundingClientRect().top>s){j.css("-webkit-transform",k(-2*i));
o.css("-webkit-transform",[k(-i),f(0)].join(" "));a.css("-webkit-transform",k(0));a.on("transitionend",g);p=setTimeout(function(){a.trigger("transitionend",g);
},u);}else{j.css("-webkit-transform",k(-i));o.css("-webkit-transform",[k(0),f(1)].join(" "));a.css("-webkit-transform",k(i));o.on("transitionend",g);p=setTimeout(function(){o.trigger("transitionend",g);
},u);}}$(document).off("touchstart",c);l=false;}function q(s){s.preventDefault();if(!l){return;}var u=s.touches[0].pageY-r;var t=1-Math.abs(u/$(window).height());
o.css("-webkit-transform",[k(u),f(t)].join(" "));j.css("-webkit-transform",k(u-i));a.css("-webkit-transform",k(u+i));}$(document).on("touchstart",c).on("touchmove",q).on("touchend",e);
var m=document.getElementById("media");var h=$("#audio_btn");m.src="image/bg-music.mp3";$(document).one("touchstart",function(){m.play();});$(m).on("play",function(){h.removeClass("audio_off").addClass("audio_play");
}).on("pause",function(){h.removeClass("audio_play").addClass("audio_off");});h.on("touchstart",function(s){if(!m.paused){m.pause();}else{m.play();}return false;
});});